Version 4
SHEET 1 5372 12844
WIRE -944 64 -960 64
WIRE -864 64 -944 64
WIRE -672 64 -688 64
WIRE -640 64 -672 64
WIRE -560 64 -576 64
WIRE -512 64 -560 64
WIRE -416 64 -512 64
WIRE -128 64 -336 64
WIRE 0 64 -128 64
WIRE 512 64 96 64
WIRE 656 64 512 64
WIRE 1072 64 656 64
WIRE 1248 64 1168 64
WIRE 1296 64 1248 64
WIRE 1408 64 1376 64
WIRE 1536 64 1408 64
WIRE 1648 64 1536 64
WIRE 1744 64 1648 64
WIRE 1248 80 1248 64
WIRE 1408 80 1408 64
WIRE 1648 80 1648 64
WIRE 1744 80 1744 64
WIRE 1536 96 1536 64
WIRE -512 112 -512 64
WIRE 0 112 0 64
WIRE 48 112 48 32
WIRE 96 112 96 64
WIRE -960 128 -960 64
WIRE 512 128 512 64
WIRE -688 176 -688 144
WIRE -688 176 -704 176
WIRE -512 176 -688 176
WIRE -128 176 -128 64
WIRE 656 176 656 144
WIRE 656 176 576 176
WIRE 1248 176 1248 160
WIRE 1328 176 1248 176
WIRE 1408 176 1408 160
WIRE 1408 176 1360 176
WIRE 1440 176 1408 176
WIRE -704 192 -704 176
WIRE 976 192 864 192
WIRE 1328 192 1328 176
WIRE 1360 192 1360 176
WIRE -688 208 -688 176
WIRE 1056 208 1040 208
WIRE 1152 208 1152 112
WIRE 1152 208 1136 208
WIRE -960 224 -960 208
WIRE -864 224 -864 144
WIRE -864 224 -960 224
WIRE 976 224 944 224
WIRE 1440 224 1440 176
WIRE 656 240 656 176
WIRE 1248 240 1248 176
WIRE 16 256 16 208
WIRE 16 256 -128 256
WIRE 512 288 512 224
WIRE 592 288 512 288
WIRE 512 304 512 288
WIRE -688 320 -688 288
WIRE -640 320 -688 320
WIRE -560 320 -560 64
WIRE -560 320 -576 320
WIRE 1152 320 1152 208
WIRE 1344 320 1344 256
WIRE 1440 320 1440 304
WIRE 1440 320 1344 320
WIRE -128 336 -128 256
WIRE -16 336 -128 336
WIRE 80 336 80 208
WIRE 80 336 48 336
WIRE 768 336 656 336
WIRE 656 400 656 336
WIRE 768 432 768 416
WIRE 864 432 864 192
WIRE 864 432 768 432
WIRE 768 448 768 432
WIRE 864 448 864 432
WIRE 944 448 944 224
WIRE 1536 448 1536 176
WIRE 1536 448 944 448
WIRE 1552 448 1536 448
WIRE 48 464 48 336
WIRE 1536 480 1536 448
WIRE -400 496 -528 496
WIRE -272 512 -336 512
WIRE -128 512 -192 512
WIRE -32 512 -64 512
WIRE -16 512 -32 512
WIRE 1152 512 1152 384
WIRE -848 528 -976 528
WIRE -672 528 -848 528
WIRE -400 528 -448 528
WIRE 512 528 512 384
WIRE 656 528 656 464
WIRE 656 528 512 528
WIRE 768 528 656 528
WIRE 864 528 864 512
WIRE 864 528 768 528
WIRE -976 592 -976 528
WIRE 1344 592 1344 400
WIRE 1344 592 1200 592
WIRE -848 640 -848 608
WIRE -800 640 -848 640
WIRE -672 640 -672 608
WIRE -528 640 -528 496
WIRE -528 640 -672 640
WIRE -208 640 -288 640
WIRE -128 640 -144 640
WIRE -32 640 -32 512
WIRE -32 640 -48 640
WIRE 1344 640 1344 592
WIRE 48 656 48 560
WIRE -848 672 -848 640
WIRE -672 672 -672 640
WIRE -32 704 -32 640
WIRE 112 752 48 752
WIRE 192 752 176 752
WIRE 224 752 192 752
WIRE 320 752 288 752
WIRE 400 752 320 752
WIRE 544 752 400 752
WIRE 656 752 640 752
WIRE 720 752 656 752
WIRE 880 752 800 752
WIRE 320 768 320 752
WIRE 656 768 656 752
WIRE -32 784 -112 784
WIRE 192 784 192 752
WIRE -32 816 -32 784
WIRE 592 832 592 816
WIRE 592 832 400 832
WIRE 1344 832 1344 720
WIRE 192 896 192 848
WIRE 320 896 320 832
WIRE 320 896 192 896
WIRE 400 896 320 896
WIRE 656 896 656 832
WIRE 656 896 400 896
FLAG 48 752 V_in
FLAG 192 896 0
FLAG 880 752 VCC
FLAG 1536 560 0
FLAG 1536 64 V_out
FLAG 512 528 0
FLAG 1376 224 VCC
FLAG 1312 224 0
FLAG 1248 320 0
FLAG 1344 832 0
FLAG 1008 176 0
FLAG 1008 240 VCC
FLAG 1152 608 0
FLAG 1744 160 0
FLAG -704 192 0
FLAG 656 64 V_ret
FLAG -688 320 V_in
FLAG -960 224 0
FLAG -944 64 Rede
FLAG -672 64 Trafo
FLAG -976 656 0
FLAG -976 448 V_ret
FLAG -848 752 0
FLAG -672 752 0
FLAG -800 640 V_sensor
FLAG -448 528 V_sensor
FLAG -368 544 0
FLAG -368 480 VCC
FLAG -288 640 NO
FLAG -32 816 0
FLAG 48 656 0
FLAG 48 32 NO
FLAG 864 192 V_ref
FLAG 896 848 0
FLAG 1648 224 0
SYMBOL cap 176 736 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 330µ
SYMBOL cap 336 832 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 330µ
SYMBOL diode 208 848 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value DI_1N4007
SYMBOL zener 416 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value DI_1N4748A
SYMATTR Prefix X
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 384 736 R0
SYMATTR InstName R1
SYMATTR Value 1000
SYMBOL cap 640 768 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL npn 544 816 R270
WINDOW 3 105 24 VRight 2
SYMATTR Value BC547B
SYMATTR InstName Q1
SYMBOL pnp 576 224 R180
WINDOW 3 62 62 Left 2
SYMATTR Value BC556B
SYMATTR InstName Q2
SYMBOL pnp 592 336 M180
SYMATTR InstName Q3
SYMATTR Value BC556B
SYMBOL res 640 48 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 496 288 R0
SYMATTR InstName R5
SYMATTR Value 20k
SYMBOL res 752 320 R0
SYMATTR InstName R6
SYMATTR Value 0
SYMBOL res 752 432 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL zener 672 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 26 1 Left 2
SYMATTR InstName D6
SYMATTR Value DI_1N5235B
SYMATTR Prefix X
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 848 448 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res 1520 464 R0
SYMATTR InstName R9
SYMATTR Value 80k
SYMBOL res 1520 80 R0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res 1280 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_chant
SYMATTR Value 0.33
SYMATTR SpiceLine pwr=5
SYMBOL diode 224 768 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value DI_1N4007
SYMBOL res 1232 64 R0
SYMATTR InstName R8
SYMATTR Value 3.3k
SYMBOL res 1392 64 R0
SYMATTR InstName R11
SYMATTR Value 3.3k
SYMBOL res 1232 224 R0
SYMATTR InstName R12
SYMATTR Value 43k
SYMBOL res 1424 208 R0
SYMATTR InstName R13
SYMATTR Value 43k
SYMBOL res 1328 304 R0
SYMATTR InstName R14
SYMATTR Value 0
SYMBOL res 1328 624 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL nmos 1072 112 R270
SYMATTR InstName M1
SYMATTR Value IRF540
SYMBOL res 1152 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 300
SYMBOL nmos 1200 512 M0
SYMATTR InstName M2
SYMATTR Value N7002
SYMATTR Prefix X
SYMBOL Opamps\\UniversalOpamp2 1008 208 M180
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 1344 224 R90
SYMATTR InstName U2
SYMBOL cap -528 112 R0
WINDOW 3 56 35 Left 2
SYMATTR Value 3300µ
SYMATTR InstName C6
SYMBOL diode -640 336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value DI_1N4007
SYMBOL diode -640 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -7 38 VBottom 2
SYMATTR InstName D8
SYMATTR Value DI_1N4007
SYMBOL ind2 -880 48 R0
SYMATTR InstName L1
SYMATTR Value 48400
SYMATTR Type ind
SYMBOL ind2 -672 160 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 144
SYMATTR Type ind
SYMATTR SpiceLine Rser=1m
SYMBOL voltage -960 112 R0
WINDOW 123 0 0 Left 0
SYMATTR SpiceLine Rser=1m
SYMATTR InstName V3
SYMATTR Value SINE(0 311.127 60)
SYMBOL ind2 -672 304 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 144
SYMATTR Type ind
SYMATTR SpiceLine Rpar=1m
SYMBOL res -992 432 R0
SYMATTR InstName R_1
SYMATTR Value 2.4k
SYMBOL res -864 512 R0
SYMATTR InstName R_2
SYMATTR Value 4.4k
SYMBOL res -864 656 R0
SYMATTR InstName R_3
SYMATTR Value 10k
SYMBOL res -688 512 R0
SYMATTR InstName R_4
SYMATTR Value 2.5k
SYMBOL res -688 656 R0
SYMATTR InstName R_5
SYMATTR Value 7.5k
SYMBOL npn -16 464 R0
SYMATTR InstName Q4
SYMATTR Value BC547B
SYMBOL diode -128 528 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value DI_1N4007
SYMBOL res -288 528 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res -32 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 450
SYMBOL diode 48 320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMATTR Value DI_1N4007
SYMBOL Opamps\\UniversalOpamp2 -368 512 R0
SYMATTR InstName U4
SYMBOL zener -960 656 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value DI_1N5235B
SYMATTR Prefix X
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -432 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 0.01
SYMBOL res 704 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R21
SYMATTR Value 0.0001
SYMBOL DPDT 32 176 R0
SYMATTR InstName U7
SYMBOL LED -208 656 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 10 VBottom 2
SYMATTR InstName D10
SYMATTR Value LXHL-BW02
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -144 160 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 1632 64 R0
SYMATTR InstName R19
SYMATTR Value 450
SYMBOL LED 1632 160 R0
SYMATTR InstName D11
SYMATTR Value NSPW500BS
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL LED 1136 320 R0
SYMATTR InstName D12
SYMATTR Value NSPW500BS
SYMATTR Description Diode
SYMATTR Type diode
TEXT 1840 1656 Left 2 !* LMX24_LM2902 - Rev. A\n* Created by Paul Goedeke; November 16, 2018\n* Created with Green-Williams-Lis Op Amp Macro-model Architecture\n* Copyright 2018 by Texas Instruments Corporation\n******************************************************\n* MACRO-MODEL SIMULATED PARAMETERS:\n******************************************************\n* OPEN-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Aol)\n* UNITY GAIN BANDWIDTH (GBW)\n* INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)\n* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)\n* DIFFERENTIAL INPUT IMPEDANCE (Zid)\n* COMMON-MODE INPUT IMPEDANCE (Zic)\n* OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zo)\n* OUTPUT CURRENT THROUGH THE SUPPLY (Iout)\n* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en)\n* INPUT CURRENT NOISE DENSITY VS. FREQUENCY (in)\n* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vo)\n* SHORT-CIRCUIT OUTPUT CURRENT (Isc)\n* QUIESCENT CURRENT (Iq)\n* SETTLING TIME VS. CAPACITIVE LOAD (ts)\n* SLEW RATE (SR)\n* SMALL SIGNAL OVERSHOOT VS. CAPACITIVE LOAD\n* LARGE SIGNAL RESPONSE\n* OVERLOAD RECOVERY TIME (tor)\n* INPUT BIAS CURRENT (Ib)\n* INPUT OFFSET CURRENT (Ios)\n* INPUT OFFSET VOLTAGE (Vos)\n* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)\n* INPUT OFFSET VOLTAGE VS. INPUT COMMON-MODE VOLTAGE (Vos vs. Vcm)\n* INPUT/OUTPUT ESD CELLS (ESDin, ESDout)\n******************************************************\n.subckt LMX24_LM2902 IN+ IN- VCC VEE OUT\n******************************************************\n* MODEL DEFINITIONS:\n.model BB_SW VSWITCH(Ron=50 Roff=1e12 Von=700e-3 Voff=0)\n.model ESD_SW VSWITCH(Ron=50 Roff=1e12 Von=250e-3 Voff=0)\n.model OL_SW VSWITCH(Ron=1e-3 Roff=1e9 Von=900e-3 Voff=800e-3)\n.model OR_SW VSWITCH(Ron=10e-3 Roff=1e9 Von=1e-3 Voff=0)\n.model R_NOISELESS RES(T_ABS=-273.15)\n******************************************************\n \n\nI_OS        ESDn MID -18N\nI_B         37 MID -20N\nV_GRp       57 MID 180\nV_GRn       58 MID -180\nV_ISCp      51 MID 40\nV_ISCn      52 MID -40\nV_ORn       45 VCLP -1.2\nV11         56 44 0\nV_ORp       43 VCLP 1.2\nV12         55 42 0\nV4          33 OUT 0\nVCM_MIN     79 VEE_B 0\nVCM_MAX     80 VCC_B -1.5\nI_Q         VCC VEE 175U\nV_OS        86 37 1.8M\nR61         MID 22 R_NOISELESS 8.001K \nC16         22 23 19.89P \nR58         23 22 R_NOISELESS 100MEG \nGVCCS2      23 MID VEE_B MID  -992.9M\nR57         MID 23 R_NOISELESS 1 \nXU3         VCC_B VEE_B 24 25 26 27 MID PHASEREV_0\nXU1         VIMON MID CRS CRS_DIST_0\nC21         28 29 313.8N  \nC22         30 31 636.6F  \nR70         31 MID R_NOISELESS 2.5 \nR67         31 30 R_NOISELESS 10K \nR66         30 MID R_NOISELESS 1 \nXU2         31 MID MID 32 VCCS_LIM_ZO_0\nGVCCS4      30 MID 29 MID  -4.3\nR65         29 MID R_NOISELESS 3.03K \nR64         29 28 R_NOISELESS 10K \nR63         28 MID R_NOISELESS 1 \nGVCCS3      28 MID CL_CLAMP 33  -90\nR62         32 MID R_NOISELESS 1 \nC29         34 MID 47F \nR78         MID 34 R_NOISELESS 1MEG \nGVCCS9      34 MID 35 MID  -1U\nXU5         36 MID MID CLAMP CRS MID VCCS_LIM_2_EN_0\nC28         38 MID 1P \nR77         39 38 R_NOISELESS 100 \nC27         40 MID 1P \nR76         41 40 R_NOISELESS 100 \nR75         MID 42 R_NOISELESS 1 \nGVCCS8      42 MID 43 MID  -1\nR74         44 MID R_NOISELESS 1 \nGVCCS7      44 MID 45 MID  -1\nXi_nn       ESDn MID FEMT_0\nXi_np       MID 37 FEMT_0\nXe_n        ESDp 37 VNSE_0\nC25         35 MID 47F \nR69         MID 35 R_NOISELESS 1MEG \nGVCCS6      35 MID VSENSE MID  -1U\nC20         CLAMP MID 9N \nR68         MID CLAMP R_NOISELESS 1MEG \nR44         MID 36 R_NOISELESS 1MEG \nXVCCS_LIM_1 46 27 MID 36 VCCS_LIM_1_0\nRdummy      MID 33 R_NOISELESS 25K \nRx          33 32 R_NOISELESS 250K \nR56         MID 47 R_NOISELESS 1K \nC15         47 48 1.592P \nR55         48 47 R_NOISELESS 100MEG \nGVCCS1      48 MID VCC_B MID  -100M\nR54         MID 48 R_NOISELESS 1 \nR49         MID 49 R_NOISELESS 4.616K \nC14         49 50 26.53P \nR48         50 49 R_NOISELESS 100MEG \nG_adjust    50 MID ESDp MID  -685.2M\nRsrc        MID 50 R_NOISELESS 1 \nXIQPos      VIMON MID MID VCC VCCS_LIMIT_IQ_0\nXIQNeg      MID VIMON VEE MID VCCS_LIMIT_IQ_0\nC_DIFF      ESDp ESDn 1P \nXCL_AMP     51 52 VIMON MID 53 54 CLAMP_AMP_LO_0\nSOR_SWp     CLAMP 55 CLAMP 55  S_VSWITCH_1\nSOR_SWn     56 CLAMP 56 CLAMP  S_VSWITCH_2\nXGR_AMP     57 58 59 MID 60 61 CLAMP_AMP_HI_0\nR39         57 MID R_NOISELESS 1T \nR37         58 MID R_NOISELESS 1T \nR42         VSENSE 59 R_NOISELESS 1M \nC19         59 MID 1F \nR38         60 MID R_NOISELESS 1 \nR36         MID 61 R_NOISELESS 1 \nR40         60 62 R_NOISELESS 1M \nR41         61 63 R_NOISELESS 1M \nC17         62 MID 1F \nC18         MID 63 1F \nXGR_SRC     62 63 CLAMP MID VCCS_LIM_GR_0\nR21         53 MID R_NOISELESS 1 \nR20         MID 54 R_NOISELESS 1 \nR29         53 64 R_NOISELESS 1M \nR30         54 65 R_NOISELESS 1M \nC9          64 MID 1F \nC8          MID 65 1F \nXCL_SRC     64 65 CL_CLAMP MID VCCS_LIM_4_0\nR22         51 MID R_NOISELESS 1T \nR19         MID 52 R_NOISELESS 1T \nXCLAWp      VIMON MID 66 VCC_B VCCS_LIM_CLAW+_0\nXCLAWn      MID VIMON VEE_B 67 VCCS_LIM_CLAW-_0\nR12         66 VCC_B R_NOISELESS 1K \nR16         66 68 R_NOISELESS 1M \nR13         VEE_B 67 R_NOISELESS 1K \nR17         69 67 R_NOISELESS 1M \nC6          69 MID 1F \nC5          MID 68 1F \nG2          VCC_CLP MID 68 MID  -1M\nR15         VCC_CLP MID R_NOISELESS 1K \nG3          VEE_CLP MID 69 MID  -1M\nR14         MID VEE_CLP R_NOISELESS 1K \nXCLAW_AMP   VCC_CLP VEE_CLP VOUT_S MID 70 71 CLAMP_AMP_LO_0\nR26         VCC_CLP MID R_NOISELESS 1T \nR23         VEE_CLP MID R_NOISELESS 1T \nR25         70 MID R_NOISELESS 1 \nR24         MID 71 R_NOISELESS 1 \nR27         70 72 R_NOISELESS 1M \nR28         71 73 R_NOISELESS 1M \nC11         72 MID 1F \nC10         MID 73 1F \nXCLAW_SRC   72 73 CLAW_CLAMP MID VCCS_LIM_3_0\nH2          41 MID V11 -1\nH3          39 MID V12 1\nC12         SW_OL MID 100P \nR32         74 SW_OL R_NOISELESS 100 \nR31         74 MID R_NOISELESS 1 \nXOL_SENSE   MID 74 40 38 OL_SENSE_0\nS1          28 29 SW_OL MID  S_VSWITCH_3\nH1          75 MID V4 1K\nS7          VEE OUT VEE OUT  S_VSWITCH_4\nS6          OUT VCC OUT VCC  S_VSWITCH_5\nR11         MID 76 R_NOISELESS 1T \nR18         76 VOUT_S R_NOISELESS 100 \nC7          VOUT_S MID 10P \nE5          76 MID OUT MID  1\nC13         VIMON MID 10P \nR33         75 VIMON R_NOISELESS 100 \nR10         MID 75 R_NOISELESS 1T \nR47         77 VCLP R_NOISELESS 100 \nC24         VCLP MID 100P \nE4          77 MID CL_CLAMP MID  1\nR46         MID CL_CLAMP R_NOISELESS 1K \nG9          CL_CLAMP MID CLAW_CLAMP MID  -1M\nR45         MID CLAW_CLAMP R_NOISELESS 1K \nG8          CLAW_CLAMP MID 34 MID  -1M\nR43         MID VSENSE R_NOISELESS 1K \nG15         VSENSE MID CLAMP MID  -1M\nC4          46 MID 1F \nR9          46 78 R_NOISELESS 1M \nR7          MID 79 R_NOISELESS 1T \nR6          80 MID R_NOISELESS 1T \nR8          MID 78 R_NOISELESS 1 \nXVCM_CLAMP  26 MID 78 MID 80 79 VCCS_EXT_LIM_0\nE1          MID 0 81 0  1\nR89         VEE_B 0 R_NOISELESS 1 \nR5          82 VEE_B R_NOISELESS 1M \nC3          82 0 1F \nR60         81 82 R_NOISELESS 1MEG \nC1          81 0 1 \nR3          81 0 R_NOISELESS 1T \nR59         83 81 R_NOISELESS 1MEG \nC2          83 0 1F \nR4          VCC_B 83 R_NOISELESS 1M \nR88         VCC_B 0 R_NOISELESS 1 \nG17         VEE_B 0 VEE 0  -1\nG16         VCC_B 0 VCC 0  -1\nR_PSR       84 24 R_NOISELESS 1K \nG_PSR       24 84 47 22  -1M\nR2          25 ESDn R_NOISELESS 1M \nR1          84 85 R_NOISELESS 1M \nR_CMR       86 85 R_NOISELESS 1K \nG_CMR       85 86 49 MID  -1M\nC_CMn       ESDn MID 2P \nC_CMp       MID ESDp 2P \nR53         ESDn MID R_NOISELESS 1T \nR52         MID ESDp R_NOISELESS 1T \nR35         IN- ESDn R_NOISELESS 10M \nR34         IN+ ESDp R_NOISELESS 10M \n \n.MODEL S_VSWITCH_1 VSWITCH (RON=10M ROFF=1T VON=10M VOFF=0)\n.MODEL S_VSWITCH_2 VSWITCH (RON=10M ROFF=1T VON=10M VOFF=0)\n.MODEL S_VSWITCH_3 VSWITCH (RON=1M ROFF=1T VON=500M VOFF=100M)\n.MODEL S_VSWITCH_4 VSWITCH (RON=50 ROFF=1T VON=500M VOFF=450M)\n.MODEL S_VSWITCH_5 VSWITCH (RON=50 ROFF=1T VON=500M VOFF=450M)\n \n.ENDS LMX24_LM2902\n*\n.SUBCKT PHASEREV_0  VCC VEE VIN+ VIN- VOUT+ VOUT- MID\nE1 VOUT+ MID VALUE={IF(V(VIN+,MID)<V(VEE,MID)-0.3,V(VCC,MID),V(VIN+,MID))}\nE2 VOUT- MID VALUE={IF(V(VIN-,MID)<V(VEE,MID)-0.3,V(VCC,MID),V(VIN-,MID))}\n.ENDS\n*\n \n\n.SUBCKT CRS_DIST_0  VIMON MID OUT\nV1 VREF MID -40M\nESHF VSHF MID VIMON VREF 1\nGZC MID ZC VALUE = {SGN(V(VSHF,MID))}\nR1 ZC MID 1\nC1 ZC MID 2U\nGCR MID OUT VALUE = {IF((ABS(V(ZC,MID))<=0.9),0,1)}\nR2 OUT MID 1\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_ZO_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 4E3\n.PARAM IPOS = 1E6\n.PARAM INEG = -1E6\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_2_EN_0  VC+ VC- IOUT+ IOUT- EN MID\n.PARAM GAIN = 8.4E-4\n.PARAM IPOS = 0.0048\n.PARAM INEG = -0.0048\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(EN,MID)*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT FEMT_0  1 2\n.PARAM FLWF=1E-3\n.PARAM NLFF=500\n.PARAM NVRF=500\n.PARAM GLFF={PWR(FLWF,0.25)*NLFF/1164}\n.PARAM RNVF={1.184*PWR(NVRF,2)}\n.MODEL DVNF D KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16\nI1 0 7 10E-3\nI2 0 8 10E-3\nD1 7 0 DVNF\nD2 8 0 DVNF\nE1 3 6 7 8 {GLFF}\nR1 3 0 1E9\nR2 3 0 1E9\nR3 3 6 1E9\nE2 6 4 5 0 10\nR4 5 0 {RNVF}\nR5 5 0 {RNVF}\nR6 3 4 1E9\nR7 4 0 1E9\nG1 1 2 3 4 1E-6\n.ENDS\n*\n \n\n.SUBCKT VNSE_0  1 2\n.PARAM FLW=10\n.PARAM NLF=80\n.PARAM NVR=35\n.PARAM GLF={PWR(FLW,0.25)*NLF/1164}\n.PARAM RNV={1.184*PWR(NVR,2)}\n.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16\nI1 0 7 10E-3\nI2 0 8 10E-3\nD1 7 0 DVN\nD2 8 0 DVN\nE1 3 6 7 8 {GLF}\nR1 3 0 1E9\nR2 3 0 1E9\nR3 3 6 1E9\nE2 6 4 5 0 10\nR4 5 0 {RNV}\nR5 5 0 {RNV}\nR6 3 4 1E9\nR7 4 0 1E9\nE3 1 2 3 4 1\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_1_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 1E-4\n.PARAM IPOS = .5\n.PARAM INEG = -.5\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIMIT_IQ_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 1E-3\nG1 IOUT- IOUT+ VALUE={IF( (V(VC+,VC-)<=0),0,GAIN*V(VC+,VC-) )}\n.ENDS\n*\n \n\n.SUBCKT CLAMP_AMP_LO_0  VC+ VC- VIN COM VO+ VO-\n.PARAM G=1\nGVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}\nGVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}\n.ENDS\n*\n \n\n.SUBCKT CLAMP_AMP_HI_0  VC+ VC- VIN COM VO+ VO-\n.PARAM G=10\nGVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}\nGVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_GR_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 1\n.PARAM IPOS = 0.013\n.PARAM INEG = -0.013\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_4_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 1\n.PARAM IPOS = 1.04\n.PARAM INEG = -1.04\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_CLAW+_0  VC+ VC- IOUT+ IOUT-\nG1 IOUT+ IOUT- TABLE {ABS(V(VC+,VC-))} =\n+(0, 1.17E-03)\n+(0.0046251, 1.17E-3)\n+(0.15716, 1.21E-3)\n+(1.3309, 1.28E-3)\n+(35.075, 2.12E-3)\n+(35.680, 2.55E-3)\n+(36.033, 2.84E-3)\n+(37.416, 7.97E-3)\n.ENDS\n*\n \n\n.SUBCKT VCCS_LIM_CLAW-_0  VC+ VC- IOUT+ IOUT-\nG1 IOUT+ IOUT- TABLE {ABS(V(VC+,VC-))} =\n+(0.010, 2.50E-5)\n+(0.070, 2.50E-5)\n+(0.090, 5.80E-4)\n+(0.100, 6.06E-4)\n+(0.760, 7.14E-4) \n+(1.440, 7.62E-4)\n+(8.000, 1.10E-3)\n+(13.60, 1.55E-3)\n+(15.45, 1.75E-3)\n+(17.26, 2.15E-3)\n+(18.87, 2.94E-3)\n+(21.58, 4.50E-3)\n+(25.53, 1.02E-2)\n.ENDS\n*\n \n\n \n.SUBCKT VCCS_LIM_3_0  VC+ VC- IOUT+ IOUT-\n.PARAM GAIN = 1\n.PARAM IPOS = 0.435\n.PARAM INEG = -0.435\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS\n*\n \n\n.SUBCKT OL_SENSE_0  COM SW+ OLN  OLP\nGSW+ COM SW+ VALUE = {IF((V(OLN,COM)>10E-3 | V(OLP,COM)>10E-3),1,0)}\n.ENDS\n*\n \n\n.SUBCKT VCCS_EXT_LIM_0  VIN+ VIN- IOUT- IOUT+ VP+ VP-\n.PARAM GAIN = 1\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}\n.ENDS\n*
TEXT -552 1152 Left 2 !*SRC=1N5235B;DI_1N5235B;Diodes;Zener <=10V; 6.80V  0.500W   Diodes Inc. Zener \n*SYM=HZEN \n.SUBCKT DI_1N5235B  1 2 \n*        Terminals    A   K \nD1 1 2 DF \nDZ 3 1 DR \nVZ 2 3 4.56 \n.MODEL DF D ( IS=30.3p RS=1.24 N=1.10 \n+ CJO=61.5p VJ=0.750 M=0.330 TT=50.1n ) \n.MODEL DR D ( IS=6.06f RS=1.15 N=2.97 ) \n.ENDS
TEXT 624 1168 Left 2 !*SRC=1N4748A;DI_1N4748A;Diodes;Zener 10V-50V; 22.0V  1.00W   Diodes Inc.\n*Zener\n*SYM=HZEN\n.SUBCKT DI_1N4748A  1 2\n*        Terminals    A   K\nD1 1 2 DF\nDZ 3 1 DR\nVZ 2 3 20.3\n.MODEL DF D ( IS=18.7p RS=0.620 N=1.10\n+ CJO=58.2p VJ=1.00 M=0.330 TT=50.1n )\n.MODEL DR D ( IS=3.75f RS=1.54 N=2.29 )\n.ENDS
TEXT -424 1512 Left 2 !*SRC=1N4007;DI_1N4007;Diodes;Si;  1.00kV  1.00A  3.00us   Diodes, Inc. diode\n.MODEL DI_1N4007 D  ( IS=76.9p RS=42.0m BV=1.00k IBV=5.00u\n+ CJO=26.5p  M=0.333 N=1.45 TT=4.32u )
TEXT 112 736 Left 2 ;-
TEXT 160 736 Left 2 ;+
TEXT 328 776 Left 2 ;+
TEXT 328 816 Left 2 ;-
TEXT 2824 336 Left 2 !*---------- 2N7002 Spice Model ----------\n.SUBCKT N7002 10 20 30 \n*     TERMINALS:  D  G  S\nM1 1 2 3 3 NMOS L = 1E-006 W = 1E-006 \nRD 10 1 0.976 \nRS 30 3 0.001 \nRG 20 2 160.6 \nCGS 2 3 2E-011 \nEGD 12 0 2 1 1 \nVFB 14 0 0 \nFFB 2 1 VFB 1 \nCGD 13 14 5.9E-011 \nR1 13 0 1 \nD1 12 13 DLIM \nDDG 15 14 DCGD \nR2 12 15 1 \nD2 15 0 DLIM \nDSD 3 10 DSUB \n.MODEL NMOS NMOS LEVEL = 3 VMAX = 1E+006 ETA = 0 VTO = 2.154 \n+ TOX = 6E-008 NSUB = 1E+016 KP = 0.4654 KAPPA = 1E-015 U0 = 400 \n.MODEL DCGD D CJO = 1.2E-011 VJ = 0.6 M = 0.6 \n.MODEL DSUB D IS = 6.808E-010 N = 1.576 RS = 0.1408 BV = 72 CJO = 8E-012 VJ = 0.8 M = 0.6474 \n.MODEL DLIM D IS = 0.0001 \n.ENDS\n*Diodes N7002 Spice Model v0 Last Revised 2017/2/9
TEXT 2560 48 Left 2 !.model IRF540 vdmos VTO=3.542 RS=0.03646 KP=35.149 RD=0.0291 RG=6 mfg=International_Rectifier Vds=100 CGDMAX=2.70n CGDMIN=4.00E-11 Cjo=4.76E-10 IS=1.32p Rb=0.01 TT=2.305e-07 Cgs=1.54E-09 Ksubthres=0.1
TEXT -528 128 Left 2 ;+
TEXT -520 152 Left 2 ;-
TEXT -888 16 Left 2 !K L1 L2 L3 1
TEXT -88 744 Left 2 ;Botão
TEXT 1064 632 Left 2 ;2N7000
TEXT -904 576 Left 2 ;NTC
TEXT 1592 -48 Left 2 ;Vout=Vref*(1+100k/80k)\nVout=6.667*(2.25)=15v
TEXT -488 216 Left 2 ;C>=2300µ
TEXT 712 312 Left 2 ;Potenciometro
TEXT 680 504 Left 2 ;Vmax
TEXT 720 376 Left 2 ;V-
TEXT -496 -104 Left 2 ;ripple:
TEXT 448 -64 Left 2 ;.tran 0 500m 40m 100u
TEXT 1376 -88 Left 2 ;;tran 0 70m 50m 2u
TEXT 1344 -120 Left 2 ;ripple:
TEXT -480 -64 Left 2 !.tran 0 70m 10m 50u
TEXT 1512 -32 Left 2 ;MAX
TEXT 1256 480 Left 2 ;Potenciometro
TEXT -248 696 Left 2 ;led laranja
TEXT 1608 256 Left 2 ;Led Verde
TEXT 1728 192 Left 2 ;só está dizendo que a fonte está ativa, com uma tensão alta
